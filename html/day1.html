<meta charset="UTF-8"><meta http-equiv="content-type" content="text/html;charset=UTF-8"><meta name="viewport" content="width=600, initial-scale=1"><style>span.md {width: 1000;display: inline-block;}body{max-width:680px;margin:auto;padding:20px;text-align:justify;line-height:140%; -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smoothing:antialiased;color:#222;font-family:Palatino,Georgia,"Times New Roman",serif}</style><style>@media print{*{-webkit-print-color-adjust:exact;text-shadow:none !important}}body{counter-reset: h1 h2 h3 h4 h5 h6 paragraph}@page{margin:0;size:auto}#mdContextMenu{position:absolute;background:#383838;cursor:default;border:1px solid #999;color:#fff;padding:4px 0px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,"Helvetica Neue",sans-serif;font-size:85%;font-weight:600;border-radius:4px;box-shadow:0px 3px 10px rgba(0,0,0,35%)}#mdContextMenu div{padding:0px 20px}#mdContextMenu div:hover{background:#1659d1}.md code,.md pre{font-family:Menlo,Consolas,monospace;font-size:98%;text-align:left;line-height:140%}.md .mediumToc code,.md longToc code,.md .shortToc code,.md h1 code,.md h2 code,.md h3 code,.md h4 code,.md h5 code,.md h6 code{font-size:unset}.md div.title{font-size:26px;font-weight:800;line-height:120%;text-align:center}.md div.afterTitles{height:10px}.md div.subtitle{text-align:center}.md iframe.textinsert, .md object.textinsert,.md iframe:not(.markdeep){display:block;margin-top:10px;margin-bottom:10px;width:100%;height:75vh;border:1px solid #000;border-radius:4px;background:#f5f5f4}.md .image{display:inline-block}.md img{max-width:100%;page-break-inside:avoid}.md li{text-align:left;text-indent:0}.md pre.listing {width:100%;tab-size:4;-moz-tab-size:4;-o-tab-size:4;counter-reset:line;overflow-x:auto;resize:horizontal}.md pre.listing .linenumbers span.line:before{width:30px;margin-left:-28px;font-size:80%;text-align:right;counter-increment:line;content:counter(line);display:inline-block;padding-right:13px;margin-right:8px;color:#ccc}.md div.tilde{margin:20px 0 -10px;text-align:center}.md .imagecaption,.md .tablecaption,.md .listingcaption{display:inline-block;margin:7px 5px 12px;text-align:justify;font-style:italic}.md img.pixel{image-rendering:-moz-crisp-edges;image-rendering:pixelated}.md blockquote.fancyquote{margin:25px 0 25px;text-align:left;line-height:160%}.md blockquote.fancyquote::before{content:"“";color:#DDD;font-family:Times New Roman;font-size:45px;line-height:0;margin-right:6px;vertical-align:-0.3em}.md span.fancyquote{font-size:118%;color:#777;font-style:italic}.md span.fancyquote::after{content:"”";font-style:normal;color:#DDD;font-family:Times New Roman;font-size:45px;line-height:0;margin-left:6px;vertical-align:-0.3em}.md blockquote.fancyquote .author{width:100%;margin-top:10px;display:inline-block;text-align:right}.md small{font-size:60%}.md big{font-size:150%}.md div.title,contents,.md .tocHeader,.md h1,.md h2,.md h3,.md h4,.md h5,.md h6,.md .shortTOC,.md .mediumTOC,.nonumberh1,.nonumberh2,.nonumberh3,.nonumberh4,.nonumberh5,.nonumberh6{font-family:Verdana,Helvetica,Arial,sans-serif;margin:13.4px 0 13.4px;padding:15px 0 3px;border-top:none;clear:both}.md .tocTop {display:none}.md h1,.md h2,.md h3,.md h4,.md h5,.md h6,.md .nonumberh1,.md .nonumberh2,.md .nonumberh3,.md .nonumberh4,.md .nonumberh5,.md .nonumberh6{page-break-after:avoid;break-after:avoid}.md svg.diagram{display:block;font-family:Menlo,Consolas,monospace;font-size:98%;text-align:center;stroke-linecap:round;stroke-width:2px;page-break-inside:avoid;stroke:#000;fill:#000}.md svg.diagram .opendot{fill:#fff}.md svg.diagram .shadeddot{fill:#CCC}.md svg.diagram .dotteddot{stroke:#000;stroke-dasharray:4;fill:none}.md svg.diagram text{stroke:none}@media print{@page{margin:1in 5mm;transform: scale(150%)}}@media print{.md .pagebreak{page-break-after:always;visibility:hidden}}.md a{font-family:Georgia,Palatino,'Times New Roman'}.md h1,.md .tocHeader,.md .nonumberh1{border-bottom:3px solid;font-size:20px;font-weight:bold;}.md h1,.md .nonumberh1{counter-reset: h2 h3 h4 h5 h6}.md h2,.md .nonumberh2{counter-reset: h3 h4 h5 h6;border-bottom:2px solid #999;color:#555;font-weight:bold;font-size:18px;}.md h3,.md h4,.md h5,.md h6,.md .nonumberh3,.md .nonumberh4,.md .nonumberh5,.md .nonumberh6{font-family:Verdana,Helvetica,Arial,sans-serif;color:#555;font-size:16px;}.md h3{counter-reset:h4 h5 h6}.md h4{counter-reset:h5 h6}.md h5{counter-reset:h6}.md div.table{margin:16px 0 16px 0}.md table{border-collapse:collapse;line-height:140%;page-break-inside:avoid}.md table.table{margin:auto}.md table.calendar{width:100%;margin:auto;font-size:11px;font-family:Verdana,Helvetica,Arial,sans-serif}.md table.calendar th{font-size:16px}.md .today{background:#ECF8FA}.md .calendar .parenthesized{color:#999;font-style:italic}.md table.table th{color:#FFF;background-color:#AAA;border:1px solid #888;padding:8px 15px 8px 15px}.md table.table td{padding:5px 15px 5px 15px;border:1px solid #888}.md table.table tr:nth-child(even){background:#EEE}.md pre.tilde{border-top: 1px solid #CCC;border-bottom: 1px solid #CCC;padding: 5px 0 5px 20px;margin:0 0 0 0;background:#FCFCFC;page-break-inside:avoid}.md a.target{width:0px;height:0px;visibility:hidden;font-size:0px;display:inline-block}.md a:link, .md a:visited{color:#38A;text-decoration:none}.md a:link:hover{text-decoration:underline}.md dt{font-weight:700}.md dl>dd{margin-top:-8px; margin-bottom:8px}.md dl>table{margin:35px 0 30px}.md code{page-break-inside:avoid;} @media print{.md .listing code{white-space:pre-wrap}}.md .endnote{font-size:13px;line-height:15px;padding-left:10px;text-indent:-10px}.md .bib{padding-left:80px;text-indent:-80px;text-align:left}.markdeepFooter{font-size:9px;text-align:right;padding-top:80px;color:#999}.md .mediumTOC{float:right;font-size:12px;line-height:15px;border-left:1px solid #CCC;padding-left:15px;margin:15px 0px 15px 25px}.md .mediumTOC .level1{font-weight:600}.md .longTOC .level1{font-weight:600;display:block;padding-top:12px;margin:0 0 -20px}.md .shortTOC{text-align:center;font-weight:bold;margin-top:15px;font-size:14px}.md .admonition{position:relative;margin:1em 0;padding:.4rem 1rem;border-radius:.2rem;border-left:2.5rem solid rgba(68,138,255,.4);background-color:rgba(68,138,255,.15);}.md .admonition-title{font-weight:bold;border-bottom:solid 1px rgba(68,138,255,.4);padding-bottom:4px;margin-bottom:4px;margin-left: -1rem;padding-left:1rem;margin-right:-1rem;border-color:rgba(68,138,255,.4)}.md .admonition.tip{border-left:2.5rem solid rgba(50,255,90,.4);background-color:rgba(50,255,90,.15)}.md .admonition.tip::before{content:"\24d8";font-weight:bold;font-size:150%;position:relative;top:3px;color:rgba(26,128,46,.8);left:-2.95rem;display:block;width:0;height:0}.md .admonition.tip>.admonition-title{border-color:rgba(50,255,90,.4)}.md .admonition.warn,.md .admonition.warning{border-left:2.5rem solid rgba(255,145,0,.4);background-color:rgba(255,145,0,.15)}.md .admonition.warn::before,.md .admonition.warning::before{content:"\26A0";font-weight:bold;font-size:150%;position:relative;top:2px;color:rgba(128,73,0,.8);left:-2.95rem;display:block;width:0;height:0}.md .admonition.warn>.admonition-title,.md .admonition.warning>.admonition-title{border-color:rgba(255,145,0,.4)}.md .admonition.error{border-left: 2.5rem solid rgba(255,23,68,.4);background-color:rgba(255,23,68,.15)}.md .admonition.error>.admonition-title{border-color:rgba(255,23,68,.4)}.md .admonition.error::before{content: "\2612";font-family:"Arial";font-size:200%;position:relative;color:rgba(128,12,34,.8);top:-2px;left:-3rem;display:block;width:0;height:0}.md .admonition p:last-child{margin-bottom:0}.md li.checked,.md li.unchecked{list-style:none;overflow:visible;text-indent:-1.2em}.md li.checked:before,.md li.unchecked:before{content:"\2611";display:block;float:left;width:1em;font-size:120%}.md li.unchecked:before{content:"\2610"}</style><style>.md h1::before {
content:counter(h1) " ";
counter-increment: h1;margin-right:10px}.md h2::before {
content:counter(h1) "."counter(h2) " ";
counter-increment: h2;margin-right:10px}.md h3::before {
content:counter(h1) "."counter(h2) "."counter(h3) " ";
counter-increment: h3;margin-right:10px}.md h4::before {
content:counter(h1) "."counter(h2) "."counter(h3) "."counter(h4) " ";
counter-increment: h4;margin-right:10px}.md h5::before {
content:counter(h1) "."counter(h2) "."counter(h3) "."counter(h4) "."counter(h5) " ";
counter-increment: h5;margin-right:10px}.md h6::before {
content:counter(h1) "."counter(h2) "."counter(h3) "."counter(h4) "."counter(h5) "."counter(h6) " ";
counter-increment: h6;margin-right:10px}</style><style>.hljs{display:block;overflow-x:auto;padding:0.5em;background:#fff;color:#000;-webkit-text-size-adjust:none}.hljs-comment{color:#006a00}.hljs-keyword{color:#02E}.hljs-literal,.nginx .hljs-title{color:#aa0d91}.method,.hljs-list .hljs-title,.hljs-tag .hljs-title,.setting .hljs-value,.hljs-winutils,.tex .hljs-command,.http .hljs-title,.hljs-request,.hljs-status,.hljs-name{color:#008}.hljs-envvar,.tex .hljs-special{color:#660}.hljs-string{color:#c41a16}.hljs-tag .hljs-value,.hljs-cdata,.hljs-filter .hljs-argument,.hljs-attr_selector,.apache .hljs-cbracket,.hljs-date,.hljs-regexp{color:#080}.hljs-sub .hljs-identifier,.hljs-pi,.hljs-tag,.hljs-tag .hljs-keyword,.hljs-decorator,.ini .hljs-title,.hljs-shebang,.hljs-prompt,.hljs-hexcolor,.hljs-rule .hljs-value,.hljs-symbol,.hljs-symbol .hljs-string,.hljs-number,.css .hljs-function,.hljs-function .hljs-title,.coffeescript .hljs-attribute{color:#A0C}.hljs-function .hljs-title{font-weight:bold;color:#000}.hljs-class .hljs-title,.smalltalk .hljs-class,.hljs-type,.hljs-typename,.hljs-tag .hljs-attribute,.hljs-doctype,.hljs-class .hljs-id,.hljs-built_in,.setting,.hljs-params,.clojure .hljs-attribute{color:#5c2699}.hljs-variable{color:#3f6e74}.css .hljs-tag,.hljs-rule .hljs-property,.hljs-pseudo,.hljs-subst{color:#000}.css .hljs-class,.css .hljs-id{color:#9b703f}.hljs-value .hljs-important{color:#ff7700;font-weight:bold}.hljs-rule .hljs-keyword{color:#c5af75}.hljs-annotation,.apache .hljs-sqbracket,.nginx .hljs-built_in{color:#9b859d}.hljs-preprocessor,.hljs-preprocessor *,.hljs-pragma{color:#643820}.tex .hljs-formula{background-color:#eee;font-style:italic}.diff .hljs-header,.hljs-chunk{color:#808080;font-weight:bold}.diff .hljs-change{background-color:#bccff9}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-comment .hljs-doctag{font-weight:bold}.method .hljs-id{color:#000}</style><style>div.title { padding-top: 40px; } div.afterTitles { height: 15px; }</style><meta charset="utf-8">
<link rel="stylesheet" href="../css/style.css">

<span class="md"><p><title>Day 1. Setting Up the Windows Build</title><div class="title"> Day 1. Setting Up the Windows Build </div>

<div class="afterTitles"></div>
<em class="underscore">Video Length: <a href="https://hero.handmade.network/episode/code/day001/">1h13</a></em>

</p><p>

Welcome to Handmade Hero! This is a series where we program an entire game, from scratch, with detailed explanations of each step. 

</p><p>

<div class="admonition tip">Over the years, a whole community has spawned around the project. Head over to <a href="https://handmade.network/">Handmade Network</a> if you have any question, comment or feedback!

</p><p>

    Additionally, if you preorder <a href="https://handmadehero.org/">Handmade Hero</a>, you will receive access to the GitHub repository, containing complete source code (tagged day-by-day) as well as community ports to other platforms. If you get stuck somewhere during this course, be sure to check it out!</div>

</p><p>

Keep in mind that everything we're going to show you in this course is only <em class="underscore">one way</em> of coding a game from scratch. It is not the only way, and you don't have to follow each step the same manner it is presented here. In this course, we will present you how <a href="https://caseymuratori.com/">Casey</a> makes games, so that you can see one <strong class="underscore">complete way</strong> of doing it, where nothing is left out. You are encouraged however to develop your own techniques and experiment with your own styles, try different things and see what works best for you. 

</p><p>

No prior knowledge of programming is required to start following along. The only thing that will help you along the way is the basic knowledge of Windows, the insides of a computer (what's a CPU, graphics card, Memory (RAM), etc. at a very general notion). Knowledge about that binary exists, that a byte is 8 bits and a Kibibyte (KiB) is 1024 bytes, and other basic computer theory, as well as the basics of color theory would definitely help as well.

</p>
<div class="longTOC">
    <p align="center">
        <a href="../index.html"><img src = "../media/logo.png"></a>
        <span align="right"><a href="day2.html">Day 2</a></span>
    </p>
    <p><a href="#" class="tocTop">(Top)</a><br/>
<a href="#starttheproject" class="level1"><span class="tocNumber">1&nbsp; </span>Start the Project</a><br/>
&nbsp;&nbsp;<a href="#starttheproject/setupthecompiler" class="level2"><span class="tocNumber">1.1&nbsp; </span>Set Up the Compiler</a><br/>
&nbsp;&nbsp;<a href="#starttheproject/commandlineinwindows" class="level2"><span class="tocNumber">1.2&nbsp; </span>Command Line in Windows</a><br/>
&nbsp;&nbsp;<a href="#starttheproject/setupthetexteditor" class="level2"><span class="tocNumber">1.3&nbsp; </span>Set Up the Text Editor</a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#starttheproject/setupthetexteditor/4codersetup" class="level3"><span class="tocNumber">1.3.1&nbsp; </span>4coder Setup</a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#starttheproject/setupthetexteditor/vscodesetup" class="level3"><span class="tocNumber">1.3.2&nbsp; </span>VSCode Setup</a><br/>
<a href="#createthefirstcodefile" class="level1"><span class="tocNumber">2&nbsp; </span>Create the First Code File</a><br/>
&nbsp;&nbsp;<a href="#createthefirstcodefile/minimumcodeyouwillneed" class="level2"><span class="tocNumber">2.1&nbsp; </span>Minimum Code You Will Need</a><br/>
<a href="#configureeverythingfordevelopment" class="level1"><span class="tocNumber">3&nbsp; </span>Configure Everything for Development</a><br/>
&nbsp;&nbsp;<a href="#configureeverythingfordevelopment/setupenvironmentvariables" class="level2"><span class="tocNumber">3.1&nbsp; </span>Set Up Environment Variables</a><br/>
&nbsp;&nbsp;<a href="#configureeverythingfordevelopment/build.bat" class="level2"><span class="tocNumber">3.2&nbsp; </span>Build.bat</a><br/>
<a href="#debugginginremedybgorvisualstudio" class="level1"><span class="tocNumber">4&nbsp; </span>Debugging in RemedyBG or Visual Studio</a><br/>
&nbsp;&nbsp;<a href="#debugginginremedybgorvisualstudio/setupremedybg" class="level2"><span class="tocNumber">4.1&nbsp; </span>Set Up RemedyBG</a><br/>
&nbsp;&nbsp;<a href="#debugginginremedybgorvisualstudio/setupvisualstudiodebugger" class="level2"><span class="tocNumber">4.2&nbsp; </span>Set Up Visual Studio Debugger</a><br/>
&nbsp;&nbsp;<a href="#debugginginremedybgorvisualstudio/debuggingyourprogram" class="level2"><span class="tocNumber">4.3&nbsp; </span>Debugging Your Program</a><br/>
&nbsp;&nbsp;<a href="#debugginginremedybgorvisualstudio/callstack" class="level2"><span class="tocNumber">4.4&nbsp; </span>Call Stack</a><br/>
<a href="#addsomethingtodofortheprogram" class="level1"><span class="tocNumber">5&nbsp; </span>Add Something to Do for the Program</a><br/>
&nbsp;&nbsp;<a href="#addsomethingtodofortheprogram/importalibrary" class="level2"><span class="tocNumber">5.1&nbsp; </span>Import a Library</a><br/>
<a href="#recap" class="level1"><span class="tocNumber">6&nbsp; </span>Recap</a><br/>
<a href="#exercises" class="level1"><span class="tocNumber">7&nbsp; </span>Exercises</a><br/>
&nbsp;&nbsp;<a href="#exercises/adifferentmessagebox" class="level2"><span class="tocNumber">7.1&nbsp; </span>A Different Message Box</a><br/>
&nbsp;&nbsp;<a href="#exercises/respawningmessageboxes" class="level2"><span class="tocNumber">7.2&nbsp; </span>Respawning Message Boxes</a><br/>
<a href="#basicsofprogramming" class="level1"><span class="tocNumber">8&nbsp; </span>Basics of Programming</a><br/>
&nbsp;&nbsp;<a href="#basicsofprogramming/entrypointonwindows" class="level2"><span class="tocNumber">8.1&nbsp; </span>Entry Point on Windows</a><br/>
&nbsp;&nbsp;<a href="#basicsofprogramming/bitwiseoperators" class="level2"><span class="tocNumber">8.2&nbsp; </span>Bitwise Operators</a><br/>
<a href="#sideconsiderations" class="level1"><span class="tocNumber">9&nbsp; </span>Side Considerations</a><br/>
&nbsp;&nbsp;<a href="#sideconsiderations/createavirtualdrive" class="level2"><span class="tocNumber">9.1&nbsp; </span>Create a Virtual Drive</a><br/>
<a href="#navigation" class="level1"><span class="tocNumber">10&nbsp; </span>Navigation</a><br/>
</p></div><a class="target" name="starttheproject">&nbsp;</a><a class="target" name="starttheproject">&nbsp;</a><a class="target" name="toc1">&nbsp;</a><h1>Start the Project</h1>
<p>


The first thing we're going to do is to actually get the project started. We do it by setting up all our tools and by building <em class="underscore">anything</em> to ensure that the tools are working properly. While it may be a bit of <em class="underscore">drudgework</em>, it's a vital step to ensure that, moving forward, the project can be continued successfully without any interruptions. 

</p><p>

At its very core, the following things must be created: 

</p><p>

<ul>
<li class="asterisk">  Something that allows you to build the actual text files that you type into the source (&ldquo;a text editor&rdquo;)
</li>
<li class="asterisk">  Something that allows you to build the text files into the executables (&ldquo;compiler&rdquo;, &ldquo;linker&rdquo;, etc).</li></ul>

</p><p>

You will also need a variety of additional tools that would render your life much simpler. All of these will be the focus of this Day.

</p>
<a class="target" name="setupthecompiler">&nbsp;</a><a class="target" name="starttheproject/setupthecompiler">&nbsp;</a><a class="target" name="toc1.1">&nbsp;</a><h2>Set Up the Compiler</h2>
<p>


A compiler is something that takes the source code that you type, and it translates it <em class="underscore">partially</em> into executable code. The role of the linker then is to gather all that executable code and put it into an executable, which is something that we can run on our computer.

</p><p>

Nowadays, these are usually bundled together under the name of <b>I</b>ntegrated <b>D</b>evelopment <b>E</b>nvironment, or IDE for short. A shorthand term &ldquo;compiler&rdquo; is also used.

</p><p>

<div class="admonition tip">For a more in-depth overview of how compiler and linker work, you can watch the short series <a href="https://hero.handmade.network/episode/intro-to-c">Intro to C</a> where these topics are covered in detail.</div>

</p><p>

This course assumes you follow along on a machine running Windows 10, and will use the <b>M</b>icro<b>s</b>oft <b>V</b>isual <b>C</b>++ development tools, or MSVC. These are available bundled with Visual Studio. You can download a free Community edition at <a href="https://visualstudio.microsoft.com/">visualstudio.microsoft.com</a> and follow the installation instructions: 

</p><p>

<ol start=1>
<li class="number">Run <code>vs_community.exe</code> file that will be downloaded after the prompt.
</li>
<li class="number">Accept the terms and conditions.
</li>
<li class="number">Wait for the installer setup to complete.
</li>
<li class="number">In the <code>Workloads</code> section, select only <code>Desktop development with C++</code>
</li>
<li class="number">You can further reduce total space required by leaving only the following tools (<code>###</code> stands for current version number of the tools): 
<ul>
    <li class="asterisk">MSVC v<code>###</code> - VS 2019 C++ x64/x86 build tools
</li>
    <li class="asterisk">C++/CLI support for v<code>###</code>
</li>
    <li class="asterisk">Windows 10 SDK (highest version available)
</li>
    <li class="asterisk">IntelliCode (If you are planning on using Visual Studio as your text editor)
</li></ul>
<li class="number">After that, the development tools will be installed</li></ol>

</p><p>

<div class="admonition ">If you don't intend to use Visual Studio debugger at all, you can save yourself some bandwidth and disk space by only downloading and installing <a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019">Build Tools for Visual Studio</a>.</div>

</p><p>

Once you are done, you can quickly test if everything was installed correctly by searching for &ldquo;Visual Studio 2019" in your Start menu. You will be greeted with the Visual Studio IDE:

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.1-vs_ide.png" target="_blank"><img class="markdeep" src="../media/day1/1.1-vs_ide.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;1:</b> Visual Studio Development Environment</span></center></div></center>

</p><p>

This tool may be used to write, compile and debug all code. While some developers use this interface to make their projects, in this course we will use other means. Feel free to try to use Visual Studio editor tools to develop your code though!

</p><p>

Other than that, depending on your choice of debugger (see Subsection  <a href="#toc4">4</a>), you might only access this IDE for debugging purposes. As for compilation, we will do it through the <b>C</b>ommand <b>L</b>ine <b>I</b>nterface (CLI).

</p>
<a class="target" name="commandlineinwindows">&nbsp;</a><a class="target" name="starttheproject/commandlineinwindows">&nbsp;</a><a class="target" name="toc1.2">&nbsp;</a><h2>Command Line in Windows</h2>
<p>


In 2020 world, the command line is getting somewhat of a comeback on Windows. Still, while on Linux the command line is omnipresent, it's still possible that you have used Windows without ever accessing it. 

</p><p>

To open a command line, simply search in your Windows <code>Start</code> Menu for <code>Command Prompt</code>. If you open it, you will be presented with a simple text window:

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.2-cmd.png" target="_blank"><img class="markdeep" src="../media/day1/1.2-cmd.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;2:</b> Default Command Prompt Window</span></center></div></center>

</p><p>

This text window allows you to have dialogue with your computer the old-fashioned way: with the text commands. For instance, <code>dir</code> lists the contents of the current directory, <code>del [filename]</code> deletes the specified file, <code>cd [directory]</code> changes the current directory, etc. 

</p><p>

<div class="admonition tip">If you're completely unfamiliar with the command lines, check out a handy command list <a href="https://en.wikipedia.org/wiki/Cmd.exe#Windows_NT_family">on Wikipedia</a>.</div>

</p><p>

<div class="admonition ">In this book, we will be using the terms &ldquo;Command Line&rdquo;, &ldquo;Command Prompt&rdquo;, &ldquo;CLI&rdquo; and &ldquo;Terminal&rdquo; interchangeably.</div>

</p><p>

The default way the Command Prompt window looks is pretty basic, and you might want to customize its font, colors, layout, etc. To do that, close the Command Prompt and copy the shortcut to the Command Prompt on your desktop.

</p><p>

<div class="admonition note"><div class="admonition-title"> Copying shortcuts from Windows 10 Start Menu</div>

</p><p>

    Please note that, if you are using your default Windows 10 theme, you cannot <code>Click and Drag</code> the shortcut to copy it. Instead:

</p><p>

<ol start=1>
        <li class="number">Search for Command Prompt in the Start Menu
</li>
        <li class="number">Right-click on the shortcut &rarr; <code>Open File Location</code>
</li>
        <li class="number">In the Explorer window that opens, find the link to Command Prompt and copy it to desktop.</div></li></ol>

</p><p>

If you now right-click and select <code>Properties</code> window, you will be able to customize a world of settings. For instance, you can specify the starting location for your terminal. By default, it starts in your user folder, which isn't very helpful if you keep your codebase somewhere else.

</p><p>

To set up your starting location: 

</p><p>

<ol start=1>
<li class="number">Pick up a place where you will keep your codebase (for example, <code>D:\Documents\Codebase</code>).
</li>
<li class="number">Open <code>Command Prompt Properties</code> &rarr; <code>Shortcut</code> tab.
</li>
<li class="number">Specify the <code>Start in</code> location to be your codebase location.
</li>
<li class="number">Navigate the other tabs to set up the color, font and layout options of your preference.
</li>
<li class="number">After restarting your Command Prompt, it will start with the color scheme and in the location specified.</li></ol>

</p><p>

For your convenience, these are the preferences we're using:

</p><p>

<ul>
<li class="asterisk"><code>Font</code>: <a href="https://github.com/liberationfonts/liberation-fonts/releases">Liberation Mono</a> (download the latest release and install the fonts in your <code>Fonts</code> folder on Windows), size 18.
</li>
<li class="asterisk"><code>Layout</code>: 
<ul>
    <li class="asterisk">Window Width: 120.
</li>
    <li class="asterisk">Window Height: 30.
</li></ul>
<li class="asterisk"><code>Colors</code>: 
<ul>
    <li class="asterisk">Screen Text: Red 140, Green 114, Blue 9
</li>
    <li class="asterisk">Screen Background: Red 16, Green 16, Blue 16</li></ul></li></ul>

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.3-cmd-prop.png" target="_blank"><img class="markdeep" src="../media/day1/1.3-cmd-prop.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;3:</b> Command Prompt window properties</span></center></div></center> 

</p><p>

As the first action in your new terminal, let's create a directory for our project! 

</p><p>

As a refresher, Command Prompt works... by processing commands. Anything you type into it is considered a command, a name of a program or a <em class="underscore">script</em>. Each command is executed from a <em class="underscore">directory</em> which is represented before the <code>&gt;</code> symbol. The first word is the command, and then usually follow <em class="underscore">parameters</em> that this command may or may not recognize. 

</p><p>

For instance, if we type <code>cd ..</code> we send a command &ldquo;Change Directory&rdquo; with parameter <code>..</code> (&ldquo;Previous folder in the structure&rdquo;). If we type <code>dir</code>, we send the command &ldquo;Show contents of the directory&rdquo; with no parameter (meaning &ldquo;of the current directory&rdquo;). 

</p><p>

<div class="admonition tip">Again, if you're completely unfamiliar with the command lines, check out a handy command list <a href="https://en.wikipedia.org/wiki/Cmd.exe#Windows_NT_family">on Wikipedia</a>.</div>

</p><p>

If your codebase is located on a different drive than the one you start in, you'll need to &ldquo;switch&rdquo; the drives first. This means typing the drive's letter followed by the colon (like <code>D:</code> if you want to switch to drive D). Below we assume that your codebase is located at the <code>D:\Documents\Codebase</code>.

</p><pre class="listing tilde"><code><div class=" input"><span class="line">C:\Users\Yakvi&gt; D: </span>
<span class="line">D:&gt; cd d:\documents\codebase</span>
<span class="line">D:\Documents\Codebase&gt; mkdir handmade</span>
<span class="line">D:\Documents\Codebase\&gt; cd handmade</span>
<span class="line">D:\Documents\Codebase\handmade&gt; _</span></div></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> Creating your work folder</div></center>
<p>


An extra thing that we'd like to touch regarding the Command Prompt is discussed in the <a href="#createavirtualdrive">Create a Virtual Drive</a> subsection.

</p>
<a class="target" name="setupthetexteditor">&nbsp;</a><a class="target" name="starttheproject/setupthetexteditor">&nbsp;</a><a class="target" name="toc1.3">&nbsp;</a><h2>Set Up the Text Editor</h2>
<p>


To edit the source files, any text editor can do the job. Notepad on Windows, for example, is perfectly capable to do it. However, text editors created specifically for the purposes of source file editing come with a variety of additional features, such as automated formatting, code highlighting, smart completion, quick navigation, etc. 

</p><p>

We will occasionally provide relevant tips on how to use the editor <a href="https://4coder.itch.io/4coder">4coder</a>. In this section, we will provide some setup tips both for <a href="https://4coder.itch.io/4coder">4coder</a> and <a href="https://code.visualstudio.com/">Visual Studio Code</a> (also know as VSCode), an alternative text editor developed by Microsoft.

</p><p>

One thing to note that, as a rule of the thumb, when selecting your editor you should carefully choose how much it gets in your way, and compare it versus the various quality of life improvements it offers. Perhaps, there's a way to replicate the improvements or at least mitigate the distractions? 

</p>
<a class="target" name="4codersetup">&nbsp;</a><a class="target" name="starttheproject/setupthetexteditor/4codersetup">&nbsp;</a><a class="target" name="toc1.3.1">&nbsp;</a><h3>4coder Setup</h3>
<p>




<div class="admonition ">4coder is a paid editor, but once you purchased it, it's yours to keep. You can also download a free demo to test it out.</div>

</p><p>

After you downloaded 4coder, you will get a zipped folder. Unzip it somewhere, for example to <code>w:\apps</code>. Now, you can open it by doubleclicking <code>4ed.exe</code>, and it will open with 4coder as its working directory.

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.5-4coder.png" target="_blank"><img class="markdeep" src="../media/day1/1.5-4coder.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;4:</b> Main window of 4coder</span></center></div></center>

</p><p>

As the top message on the screenshot says, if you hit <code>Alt-X</code> shortcut and type in &ldquo;demo&rdquo;, you can select command <code>hms_demo_tutorial</code>. Follow this tutorial to get a hang of its main features.

</p><p>

Overall, <code>Alt-X</code> is the main command lister. For instance, if you would like to change the theme from <code>theme-4coder</code> to <code>theme-handmade-hero</code>, hit <code>Alt-X</code>, type in <code>theme</code> and choose the appropriate theme from the <code>Theme lister</code>. 

</p><p>

If you'd like to change your default settings, open the <code>config.4coder</code> file (using the <code>Interactive Open</code> command or by hitting <code>Ctrl-O</code> shortcut), and <code>default_theme_name</code> to the theme of your choice. While you are here, check out other settings like <code>mode</code> or <code>automatically_load_project</code>. Hit <code>Ctrl-S</code> to save your changes.

</p><p>

<div class="admonition tip">You can further customize your 4coder experience by writing extensions directly in C++! For additional information, check out the <a href="https://4coder.handmade.network/wiki">4coder wiki</a>.</div>

</p><p>

If you want to start 4coder from your code directory, type the following command in the Command Line: 

</p><pre class="listing tilde"><code><div class=" input"><span class="line">W:\handmade\code&gt; w:\apps\4coder\4ed</span></div></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> Starting 4coder from Command Prompt</div></center>
<p>


You can also add 4coder shortcut script, we'll look into it in <a href="#setupenvironmentvariables">Set Up Environment Variables</a> subsection.

</p>
<a class="target" name="vscodesetup">&nbsp;</a><a class="target" name="starttheproject/setupthetexteditor/vscodesetup">&nbsp;</a><a class="target" name="toc1.3.2">&nbsp;</a><h3>VSCode Setup</h3>
<p>


Visual Studio Code is a free editor by Microsoft. One of its main advantages is a high availability of user-made and official extensions, however because it's using Chromium it might become rather memory-intensive. 

</p><p>

You can download VSCode and get started with it <a href="https://code.visualstudio.com/">here</a>. If you choose this editor as the editor of your choice, here are some recommended extensions you might want to add to your environment (listed in alphabetical order). 

</p><p>

Keep in mind many of these are of personal preference!

</p><p>

<ul>
<li class="asterisk">C/C++
</li>
<li class="asterisk">C/C++ Snippets
</li>
<li class="asterisk">Clang-Format (you will need to install separately <a href="https://releases.llvm.org/download.html">Clang-Format</a> executable)
</li>
<li class="asterisk">Color Highlight
</li>
<li class="asterisk">Darcula Theme
</li>
<li class="asterisk">File Template
</li>
<li class="asterisk">GitLens (if you will be using version control)
</li>
<li class="asterisk">glsl-canvas
</li>
<li class="asterisk">Hex Editor
</li>
<li class="asterisk">Indenticator
</li>
<li class="asterisk">Insight
</li>
<li class="asterisk">Paste and Indent
</li>
<li class="asterisk">Rainbow brackets
</li>
<li class="asterisk">Reloaded C/C++
</li>
<li class="asterisk">Run in terminal (as an alternative to vscode's tasks to run your <code>build.bat</code> file)
</li>
<li class="asterisk">select highlight in minimap
</li>
<li class="asterisk">Select Line Status Bar
</li>
<li class="asterisk">Select part of word
</li>
<li class="asterisk">Shader languages support for VS Code
</li>
<li class="asterisk">TODO Highlight</li></ul>

</p><p>

Overall, however, you might want ot disable anything else that would distract you from development: Minimap, Menu bar, Side bar and the terminal (when you aren't using them).

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.7-vscode.png" target="_blank"><img class="markdeep" src="../media/day1/1.7-vscode.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;5:</b> Visual Studio Code</span></center></div></center>

</p><p>

You can also <strong class="asterisk">enable autosaving</strong> by clicking File &rarr; AutoSave. Default is autosave after 1 second of inactivity, but you can change autosave options in the preferences.

</p><p>

If you're using IntelliSense, you might want to consider to tinker with you C/C++ Configurations: 

</p><p>

<ol start=1>
<li class="number">Press <code>F1</code> and type the option &ldquo;C/C++ Configurations&rdquo; (you can choose UI or JSON)
</li>
<li class="number">As <code>Include path</code> (<code>includePath</code> in JSON) set your <code>code</code> folder: <code>${workspaceFolder}/code/**</code></li></ol>

</p><p>

We're peeking a bit in the future, but you might want to also <em class="underscore">force include</em> your platform <code>.cpp</code> file by adding its full path to the <code>forcedInclude</code> list.

</p><p>

<div class="admonition note"><div class="admonition-title"> Writing code directly in Visual Studio</div>

</p><p>

    If you would like to use Visual Studio as your editor, you can follow the guide outlined here: <a href="https://hero.handmade.network/forums/code-discussion/t/1075-visual_studio_dll_compiler_nightmare_week_5#6104">Setting up project in Visual Studio</a></div>

</p>
<a class="target" name="createthefirstcodefile">&nbsp;</a><a class="target" name="createthefirstcodefile">&nbsp;</a><a class="target" name="toc2">&nbsp;</a><h1>Create the First Code File</h1>
<p>


Once we have our compiler and text editor at the ready, we can launch the latter and make a simple single C++ source file that we use to actually get our build going. 

</p><p>

<ol start=1>
<li class="number">Launch your text editor.
</li>
<li class="number">We need a folder where all our code would live. Create a folder called <code>code</code> inside your <code>handmade</code> directory. You can use the following command line prompt:</li></ol>

</p><pre class="listing tilde"><code><div class=" input"><span class="line">W:\handmade&gt; mkdir code</span>
<span class="line">W:\handmade&gt; cd code</span>
<span class="line">W:\handmade\code&gt; _</span></div></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> Creating <code>code</code> folder</div></center>
<p>


<ol start=3>
<li class="number">Create a new text file and save it as <code>win32_handmade.cpp</code> inside your <code>code</code> folder.</li></ol>

</p><p>

<div class="admonition tip">In <a href="https://4coder.itch.io/4coder">4coder</a>, you can create both the directory and the file in one go, by hitting <code>Ctrl-N</code> and typing their names.</div>

</p>
<a class="target" name="minimumcodeyouwillneed">&nbsp;</a><a class="target" name="createthefirstcodefile/minimumcodeyouwillneed">&nbsp;</a><a class="target" name="toc2.1">&nbsp;</a><h2>Minimum Code You Will Need</h2>
<p>


In this file we're going to do absolutely nothing (yet). We're going to insert just the entry point for Windows. Where to learn more about this? Whenever you're programming on Windows, you might want to always check out a website called <a href="https://docs.microsoft.com/en-us/">MSDN</a> (now also known as Microsoft Docs). It is the documentation of everything that is on Windows. 

</p><p>

<div class="admonition warning"><div class="admonition-title"> Learn ins and outs of MSDN!</div>

</p><p>

    Much of the Windows core functionality has fallen into obscurity or obfuscated by the newer API. Additionally, while this newer API is actively pushed by Microsoft and many developers, this might not be something you actively need in game development. So searching for the minutia of the programming API on Windows might become complex. The MSDN is <em class="underscore">huge</em>, and it's hard to find your way around. So one reason this course exists is exactly to help finding the correct (or some of the correct) calls and articles. Hopefully this series will become a backbone that would show you want to search for.

</p><p>

    However, even if we will present the direct links to many of the articles, this doesn't mean that you should learn how to use MSDN. If you want to program on Windows, you'll need to learn to navigate this website, read these pages and understand what they say in order to <em class="underscore">fully</em> understand everything that's going on.</div>

</p><p>

If we search for <code>WinMain</code>, which is the entry point for Windows, you will quickly find the <a href="https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-winmain">related article</a>. <code>WinMain</code> is the entry point that Windows will be looking for in our program<sup><a href="#endnote-entrypoint">1</a></sup>, everything starts from here. Its <code>syntax</code> is specified at the top of its MSDN article we provided above: 

</p><pre class="listing tilde"><code><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> CALLBACK <span class="hljs-title">WinMain</span><span class="hljs-params">(</span>
<span class="line">  HINSTANCE hInstance,</span>
<span class="line">  HINSTANCE hPrevInstance,</span>
<span class="line">  LPSTR     lpCmdLine,</span>
<span class="line">  <span class="hljs-keyword">int</span>       nShowCmd</span>
<span class="line">)</span></span>;</span></code></pre><center><div class="listingcaption tilde"><file>[MSDN]</file> WinMain function <em class="underscore">syntax</em>, or <em class="underscore">signature</em>.</div></center>
<p>


This is the part we copy and paste in our <code>win32_handmade.cpp</code> file. We will also <strong class="underscore">include</strong> the file <code>windows.h</code>, which is the <em class="underscore">header file</em> on Windows containing many of the function definitions that we will need to call in order to get our job done. 

</p><pre class="listing tilde"><code><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;windows.h&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> CALLBACK </span>
<span class="line"><span class="hljs-title">WinMain</span> <span class="hljs-params">(HINSTANCE hInstance,</span>
<span class="line">         HINSTANCE hPrevInstance,</span>
<span class="line">         LPSTR     lpCmdLine,</span>
<span class="line">         <span class="hljs-keyword">int</span>       nShowCmd)</span></span>
<span class="line"></span>{</span>
<span class="line">}</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;1:</b> <file>[win32_handmade.cpp]</file> Our first code</div></center>
<p>


We assume that the reader has a basic knowledge of reading C code. If not, you can watch the short series <a href="https://hero.handmade.network/episode/intro-to-c">Intro to C</a> to get you started. To recap, what happens is that we're including a <em class="underscore">header file</em>, the definitions of functions we can call and types we can use that Windows wants us to use in order to communicate with us. And lower below is the entry point where Windows pass us some parameters: 

</p><p>

<ul>
<li class="asterisk"><code>HINSTANCE hInstance</code>: Handle to our executable.
</li>
<li class="asterisk"><code>HINSTANCE hPrevInstance</code>: At this point, this is legacy, so the value passed is always 0.
</li>
<li class="asterisk"><code>LPSTR lpCmdLine</code>: A C string describing how the command line was set when we ran the program.
</li>
<li class="asterisk"><code>int nCmdShow</code>: A sort of a weird one of the bunch<sup><a href="#endnote-ncmdshow">2</a></sup>.</li></ul>

</p><p>

We aren't going to do anything in here, other than returning 0. In <code>WinMain</code>, this stands for &ldquo;everything ran smoothly, we're done here&rdquo;. 

</p><pre class="listing tilde"><code><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> CALLBACK</span>
<span class="line"><span class="hljs-title">WinMain</span> <span class="hljs-params">(HINSTANCE hInstance,</span>
<span class="line">         HINSTANCE hPrevInstance,</span>
<span class="line">         LPSTR     lpCmdLine,</span>
<span class="line">         <span class="hljs-keyword">int</span>       nShowCmd)</span></span>
<span class="line"></span>{</span><div class=" add"><span class="line">    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>);</span></div><span class="line">}</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;2:</b> <file>[win32_handmade.cpp]</file> C expects us to return something here, so we are returning 0.</div></center>

<a class="target" name="configureeverythingfordevelopment">&nbsp;</a><a class="target" name="configureeverythingfordevelopment">&nbsp;</a><a class="target" name="toc3">&nbsp;</a><h1>Configure Everything for Development</h1>
<p>


We'll leave our source file as a stub, because we need to get this building and executing as it is. Before we can do that however, we need to do some final preparations.

</p>
<a class="target" name="setupenvironmentvariables">&nbsp;</a><a class="target" name="configureeverythingfordevelopment/setupenvironmentvariables">&nbsp;</a><a class="target" name="toc3.1">&nbsp;</a><h2>Set Up Environment Variables</h2>
<p>


To compile, we're going to call Visual Studio, that we installed earlier (see <a href="#setupthecompiler">Set Up the Compiler</a> subsection), or rather its command <code>cl</code>. Unfortunately, even after you've installed Visual Studio you will get an error:

</p><pre class="listing tilde"><code><div class=" input"><span class="line">W:\handmade&gt;cl</span></div><span class="line">'cl' is not recognized as an internal or external command,</span>
<span class="line">operable program or batch file.</span>
<span class="line"></span>
<span class="line"></span><div class=" input"><span class="line">W:\handmade&gt; _</span></div></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> Trying to call cl</div></center>
<p>


The reason for it is that every command is being looked up in the system <em class="underscore">Path</em>. If we type <code>cl</code> we can't find it because it's not in the Path. The basic way of doing it would be running a particular script that will set up our command line for us. 

</p><p>

The file we're looking for is called <code>vcvars64.bat</code>. It's located deep inside the Visual Studio install folder. In Windows Explorer, head over to your <code>Program Files (x86)</code>, find the folder <code>Microsoft Visual Studio</code>, and then go down until you find folders <code>VC</code> &rarr; <code>Auxiliary</code> &rarr; <code>Build</code>.

</p><p>

For Visual Studio 2019 Community edition, this path would therefore be <code>C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvars64.bat</code>. 

</p><p>

<div class="admonition tip"><div class="admonition-title"> </div>

</p><p>

    You can easily find a reference to it if you search for <code>x64 Native Tools Command Prompt for VS 2019</code> in your Start Menu. <strong class="underscore">Right click</strong> the link in the menu &rarr; <strong class="underscore">Open File Location</strong> &rarr; <strong class="underscore">Right click</strong> on the file &rarr; <strong class="underscore">Properties</strong>, and copy the address in quotes in the &ldquo;Target&rdquo; window.</div>

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.8-vcvars.png" target="_blank"><img class="markdeep" src="../media/day1/1.8-vcvars.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;6:</b> Path to VCVars64.bat</span></center></div></center>

</p><p>

<div class="admonition trivia"><div class="admonition-title"> Trivia: History of &ldquo;Program Files (x86)"</div>

</p><p>

    The reason Visual Studio is in <code>Program Files (x86)</code> folder (instead of simply <code>Program Files</code>) is a historical accident. When Windows was running only in 32-bit on <a href="https://en.wikipedia.org/wiki/X86">x86</a> processors, there was a push from Intel to go to a new processor line called <a href="https://en.wikipedia.org/wiki/Itanium">Itanium</a>, based on a proprietary 64-bit architecture. Meanwhile, due to the licensing limitation AMD stayed with x86. They started developping their own version of x64 achitecture though, to stay competitive.

</p><p>

    At the end, the Itanium project didn't pan out at all, even if it was championed by Intel. Nobody wanted to go to a completely new architecture and switch to this whole new thing so that didn't work out. It was <a href="https://en.wikipedia.org/wiki/X86-64">AMD's architecture</a>, a version of x86 upgraded to handle 64 bit (while being able to run the x86 code just fine) that was endorsed and adopted. 

</p><p>

    Also it was at that time that the 64-bit versions of Windows started to get published. We'll talk a bit more about the differences between 32-bit and 64-bit CPUs later in this course when it becomes more relevant. What happened also at that time however, probably due to an attempt to keep the legacy programs running, was Microsoft's decision to make two separate <code>Program Files</code> directories: programs that are compiled to run under the 32-bit version of Windows end up installed in <code>Program Files (x86)</code> one, while the programs compiled under the 64-bit version go into <code>Program Files</code>. 

</p><p>

    As for Visual Studio, as of 2020 it <em class="underscore">still</em> hasn't been updated to run on 64-bit computers.</div>

</p><p>

So now, if you run the <code>vcvars64.bat</code> in your Command Prompt you will see the following message:

</p><pre class="listing tilde"><code><div class=" input"><span class="line">W:\handmade&gt;"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvars64.bat"</span></div><span class="line">**********************************************************************</span>
<span class="line">** Visual Studio 2019 Developer Command Prompt v##.#.##</span>
<span class="line">** Copyright (c) 2019 Microsoft Corporation</span>
<span class="line">**********************************************************************</span>
<span class="line">[vcvarsall.bat] Environment initialized for: 'x64'</span>
<span class="line"></span>
<span class="line"></span><div class=" input"><span class="line">W:\handmade&gt; _</span></div></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> Initializing Developer Environment for 64-bit version of Windows</div></center>
<p>




<div class="admonition warning">If a path contains spaces, you need to enclose it in double quotes (")!</div>

</p><p>

<div class="admonition ">Note the <code>vcvarsall.bat</code> message. What <code>vcvars64</code> does is simply calling <code>vcvarsall</code> and asking it to set up dev environment in 64-bit mode. 

</p><p>

    You can call <code>vcvarsall.bat</code> directly by replacing <code>&quot;PATH_TO_VISUAL_STUDIO\vcvars64.bat&quot;</code> with <code>&quot;PATH_TO_VISUAL_STUDIO\vcvarsall.bat&quot; x64</code>. 

</p><p>

    Note also that the &ldquo;x64" part should go outside of the quotes.</div>

</p><p>

So now, if you run <code>cl</code> in your Command Line, you will see a different message:

</p><pre class="listing tilde"><code><div class=" input"><span class="line">W:\handmade&gt;cl</span></div><span class="line">Microsoft (R) C/C++ Optimizing Compiler Version ##.#.##### for x64</span>
<span class="line">Copyright (C) Microsoft Corporation.  All rights reserved.</span>
<span class="line"></span>
<span class="line">usage: cl [ option... ] filename... [ /link linkoption... ]</span>
<span class="line"></span>
<span class="line"></span><div class=" input"><span class="line">W:\handmade&gt; _</span></div></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> <code>cl</code> now works correctly.</div></center>
<p>



Be mindful that this command must be run each time you restart your <em class="underscore">Command Prompt</em>. In order to avoid doing it manually, you can set it up to run automatically:

</p><p>

<ol start=1>
<li class="number">Create a new batch file named <code>shell.bat</code>, open it in any text editor. You can save the file in a directory called &ldquo;misc&rdquo; inside your project.
</li>
<li class="number">Insert the following code:</li></ol>

</p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span>
<span class="line">call "PATH_TO_VISUAL_STUDIO\vcvarsall.bat" x64</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;3:</b> <file>[shell.bat]</file> Setting up automated environment initialization.</div></center>
<p>



<ul>
    <li class="asterisk"><code>@echo off</code>: a command to <em class="underscore">not</em> display all the lines as they are getting executed. <code>@</code> symbol means that this line is included (so that your script won't print &ldquo;echo off&rdquo;, either). 
</li>
    <li class="asterisk"><code>call</code> command is required to <em class="underscore">call</em> a batch file from another batch file.</li></ul>

</p><p>

<ol start=3>
<li class="number">Save the file and exit. 
</li>
<li class="number">Open <code>Properties</code> to your shortcut to the Command Prompt.
</li>
<li class="number">In the <code>Target</code>, add the line <code>/k &quot;[path to your shell.bat file]&quot;</code></li></ol>

</p><p>

Upon restart of the Command Prompt, you should be greeted with the <code>vcvars</code> initialization messages.

</p><p>

You can go even one step further and expand your Path to include the <code>misc</code> directory, so that each time the system looks up a command it checks in there, as well. 

</p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span>
<span class="line">call "PATH_TO_VISUAL_STUDIO\vcvarsall.bat" x64</span><div class=" add"><span class="line">set path=w:\handmade\misc;%path%</span></div></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;4:</b> <file>[shell.bat]</file> Expanding your Path.</div></center>
<p>




<div class="admonition tip"><div class="admonition-title"> Quick 4coder launch</div>

</p><p>

    If you use 4coder, you can now add a shorcut <code>4ed.bat</code> file inside your <code>misc</code> folder, containing the path to your editor:
    </p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span>
<span class="line">start [PATH_TO_4CODER]\4ed</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;5:</b> <file>[4ed.bat]</file> Shortcut to your editor.</div></center></div>

</p><p>

<p>

    
    The <code>start</code> command allows you to return to the Command Line without having to wait for 4coder to exit.

</p><p>

    Now you can simply run the 4coder by typing in <code>4ed</code>! 

</p><p>

Last, you can add a command <code>cls</code> so that the screen is cleared after the environment has been set for us:

</p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span>
<span class="line">call "PATH_TO_VISUAL_STUDIO/vcvarsall.bat" x64</span>
<span class="line">set path=w:/handmade/misc;%path%</span><div class=" add"><span class="line">cls</span></div></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;6:</b> <file>[shell.bat]</file> Your final shell setup.</div></center>
<p>


Remember to restart your terminal for the changes to apply!

</p>
<a class="target" name="build.bat">&nbsp;</a><a class="target" name="configureeverythingfordevelopment/build.bat">&nbsp;</a><a class="target" name="toc3.2">&nbsp;</a><h2>Build.bat</h2>
<p>


If you got this far, congratulations! That is the drudgework of setting up a machine to actually develop on. We can now start our dev environment with a double-click on an icon, and we can run our editor, compiler and debugger from here. This is some great progress right there. 

</p><p>

So anyway, if you can call <code>cl</code> from your command line, we can build an executable. That is mostly all we need. Let's get to compiling. 

</p><p>

Here is how we are going to do the builds. It is highly unusual way<sup><a href="#endnote-buildinginbat">3</a></sup> in a world where the builds take complex make files. 

</p><p>

In the root folder of our project (i.e. <code>handmade</code>), we will create a file named <code>build.bat</code>. A <code>.bat</code> (batch) file is a <em class="underscore">script</em>, a list of things that the command line should do. 

</p><p>

<div class="admonition trivia"><div class="admonition-title"> Trivia: The downsides of the Make systems</div>

</p><p>

    What other programmers do is setting up a so-called &ldquo;Make system&rdquo; using a tool like GNU Make, Ninja, CMake, etc<sup><a href="#endnote-buildtools">4</a></sup>. 

</p><p>

    The reason why it's unusual is because people are used to the fact that compiling all the code takes <em class="underscore">a long</em> time. The whole point of a make file is that you only compile that code that changed, and that's what these build utilities do: they try to optimize things so that they only do the minimal amount of work necessary to rebuild the project. And when projects tend to get very large, they tend to be very slow. But, as it turns out, if you just code <em class="underscore">sanely</em>, you can compile <em class="underscore">very</em> large programs (certainly larger than it would take to make a full professional game on this stream) in <em class="underscore">only a few seconds</em>. 

</p><p>

    So, in our course, there're no build tools. There's only a batch file, that's all there is. And this batch file compiles the code. Compiles <strong class="underscore">all the code</strong>, every time.</div>

</p><p>

In conclusion, what we're going to do is to make the <code>build.bat</code> file:

</p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span>
<span class="line">cl code\win32_handmade.cpp</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;7:</b> <file>[build.bat]</file> Your very own build file</div></center>
<p>


We would take the source file we created in Subsection  <a href="#toc2.1">2.1</a> and build it. This would be enough. However, we don't want to build it where it is right now, inside <code>code</code> directory. The compilation creates many secondary files which quickly mess up the <code>code</code> directory. Instead, we want the build output to go in a separate folder, let's call it <code>build</code>, to keep our source directory clean. For this, we will &ldquo;virtually change&rdquo; the folder using commands <code>pushd</code> and <code>popd</code>. Unlike the <code>cd</code> command, <code>pushd</code> remembers the original directory it switched from, so that <code>popd</code> can return to it once we're done.

</p><p>

We will also create a <code>build</code> directory if it doesn't exist already (using the command <code>mkdir</code>). The <code>build</code> directory will be living in <code>handmade</code> directory, so one step higher than the folder we're currently in (<code>code</code>), so we'll need to navigate &ldquo;up&rdquo; using the `..\` pseudodirectory.

</p><pre class="listing tilde"><code><span class="line">@echo off</span><div class=" add"><span class="line">mkdir build</span>
<span class="line">pushd build</span>
<span class="line"></span></div><div class=" edit"><span class="line">cl ..\code\win32_handmade.cpp</span>
<span class="line"></span>
<span class="line">popd</span></div></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;8:</b> <file>[build.bat]</file> Moving the output to the build directory. </div></center>
<p>


So now, if you run the <code>build.bat</code> script and <code>dir</code> the build directory, you'll see your executable!
</p><pre class="listing tilde"><code><div class=" input"><span class="line">W:\handmade&gt; build</span></div><div class=" batch "><span class="line">Microsoft (R) C/C++ Optimizing Compiler Version XX.XX.XXXXX for x64</span>
<span class="line">Copyright (C) Microsoft Corporation.  All rights reserved.</span>
<span class="line"></span>
<span class="line">win32_handmade.cpp</span>
<span class="line">Microsoft (R) Incremental Linker Version XX.XX.XXXXX.0</span>
<span class="line">Copyright (C) Microsoft Corporation.  All rights reserved.</span>
<span class="line"></span>
<span class="line">/out:win32_handmade.exe</span>
<span class="line">win32_handmade.obj</span>
<span class="line"></span></div><div class=" input"><span class="line"></span>
<span class="line">W:\handmade&gt;dir build</span></div><div class=" batch "><span class="line"></span>
<span class="line"> Directory of W:\handmade\build</span>
<span class="line"></span>
<span class="line">    &lt;dir&gt;          .</span>
<span class="line">    &lt;dir&gt;          ..</span>
<span class="line">            89,600 win32_handmade.exe</span>
<span class="line">               650 win32_handmade.obj</span>
<span class="line">        2 File(s)         90,250 bytes</span>
<span class="line"></span>
<span class="line"></span></div><div class=" input"><span class="line">W:\handmade&gt; _</span></div></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> Building... Success!</div></center>
<p>


Now you may ask: where does all the complicated build stuff come in? The answer is there isn't going to be any. The only additional thing is that we will start putting on the <code>cl</code> line additional things which are options to the compiler. Because the compiler has <a href="https://docs.microsoft.com/en-us/cpp/build/reference/compiler-options-listed-alphabetically">a lot of options</a>, and we're going to specify how the compiler produces the executable. For instance, we can set already the <a href="https://docs.microsoft.com/en-us/cpp/build/reference/z7-zi-zi-debug-information-format">-Zi</a> flag (option) that, after rebuilding, would allow us to step into our code.

</p><pre class="listing tilde"><code><div class=" edit"><span class="line">cl -Zi ..\code\win32_handmade.cpp</span></div></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;9:</b> <file>[build.bat]</file> Adding our first compiler flag. </div></center>
<p>




<div class="admonition "><a href="https://docs.microsoft.com/en-us/">MSDN</a> lists the compiler flags with <code>/</code> instead of <code>-</code> (i.e. <code>/Zi</code> instead of <code>-Zi</code>). These are interchangeable on Windows, so use whichever you prefer.</div>

</p><p>

<div class="admonition tip"><div class="admonition-title"> Set up the project in 4coder</div>

</p><p>

    In <a href="https://4coder.itch.io/4coder">4coder</a>, you can now setup your project so that each time you resume your coding session, you can pick up the code from where you left it. Simply hit the command <code>setup_new_project</code> and follow the instructions: 

</p><p>

    <code>Alt-X</code> &rarr; <code>setup_new_project</code>

</p><p>

<ul>
    <li class="asterisk"><strong class="asterisk">Build Target</strong>: code/win32_handmade.cpp
</li>
    <li class="asterisk"><strong class="asterisk">Output Directory</strong>: build
</li>
    <li class="asterisk"><strong class="asterisk">Output</strong>: win32_handmade.exe

</p><p>

</li></ul>
    If you have <code>automatically_load_project</code> in the <code>config.4coder</code> set to <code>true</code>, the editor will automatically load your project on your next session.

</p><p>

    To quickly build in 4coder, simply press <code>Alt-M</code> shortcut or <code>F1</code> if you loaded your project. <code>Alt-Comma</code> closes the compile window.</div>

</p>
<a class="target" name="debugginginremedybgorvisualstudio">&nbsp;</a><a class="target" name="debugginginremedybgorvisualstudio">&nbsp;</a><a class="target" name="toc4">&nbsp;</a><h1>Debugging in RemedyBG or Visual Studio</h1>
<p>


We now have a working Win32 program build by the Command Line using our own batch file. If we now want to step into that, we should start the debugger. 

</p>
<a class="target" name="setupremedybg">&nbsp;</a><a class="target" name="debugginginremedybgorvisualstudio/setupremedybg">&nbsp;</a><a class="target" name="toc4.1">&nbsp;</a><h2>Set Up RemedyBG</h2>
<p>


We now need to set up the program through which we will be analyzing and debugging our code while it's running, i.e. a <em class="underscore">debugger</em>. (Debugging is just a fancy word for &ldquo;hunting for own mistakes&rdquo;).

</p><p>

<a href="https://visualstudio.microsoft.com/">Visual Studio</a> provides a debugger out of the box, and it's <em class="underscore">fine</em>. Visual Studio itself is slow to boot and, overall is pretty gargantuan. For a nice sleek debugging experience, we recommend a debugger called <a href="https://remedybg.itch.io/remedybg">RemedyBG</a>. While still in development, this program already matches all of the essential functionality from Visual Studio. 

</p><p>

<div class="admonition ">RemedyBG is a paid debugger, but once you purchased it, it's yours to keep.</div>

</p><p>

Once you downloaded the latest version, unzip it somewhere on your hard drive.

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.9-remedybg.png" target="_blank"><img class="markdeep" src="../media/day1/1.9-remedybg.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;7:</b> RemedyBG debugger</span></center></div></center>

</p><p>

Let's make a <code>build.bat</code> file in your <code>misc</code> directory to run it. 

</p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span>
<span class="line">start [PATH_TO_REMEDYBG]\RemedyBG build\win32_handmade.exe</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;10:</b> <file>[debug.bat]</file> Launching debugging in RemedyBG</div></center>
<p>



You'll need to set where are we running the program from. In any relatively low-level piece of code there's a so-called &ldquo;Current Working Directory&rdquo;, from which the program was launched. Everything that you do when you reference external files in your code (like loading files) you should use with a relative path, relative specifically to Current Working Directory. In short, it's a path which is important for us to set from the get-go, so that we always reference things correctly.

</p><p>

In order to set ourselves for success, let's make a directory called <code>data</code> in the root <code>handmade</code> directory. In this directory, all the packaged assets (art, sounds, etc.) will live. Then, in <a href="https://remedybg.itch.io/remedybg">RemedyBG</a>, in the menu <code>Session -&gt; Working Directory</code>, change it to <code>W:\Handmade\Data</code>.

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.9-remedybg2.png" target="_blank"><img class="markdeep" src="../media/day1/1.9-remedybg2.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;8:</b> Setting your working directory in RemedyBG</span></center></div></center>

</p><p>

Additionally, save your session so your settings are preserved, click <code>Session -&gt; Save as...</code> and save it as <code>misc/handmade.rdbg</code>. You then can modify the <code>debug.bat</code> so that this session is loaded automatically. 

</p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span><div class=" edit"><span class="line">start [PATH_TO_REMEDY_BG_FOLDER]\RemedyBG misc\handmade.rdbg</span></div></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;11:</b> <file>[debug.bat]</file> </div></center>

<a class="target" name="setupvisualstudiodebugger">&nbsp;</a><a class="target" name="debugginginremedybgorvisualstudio/setupvisualstudiodebugger">&nbsp;</a><a class="target" name="toc4.2">&nbsp;</a><h2>Set Up Visual Studio Debugger</h2>
<p>


If you aren't interested in trying out RemedyBG just yet, you can instead use <code>debug.bat</code> to start Visual Studio debugger:

</p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span>
<span class="line">devenv build\win32_handmade.exe</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;12:</b> <file>[debug.bat]</file> Launching debugging in Visual Studio</div></center>
<p>


If you run <code>debug</code> from your command prompt now, Visual studio will load a dummy solution. You can then right-click on the <code>win32_handmade</code> in Solution Explorer &rarr; <code>Properties</code> to change your <code>Working Directory</code> to <code>w:\handmade\data</code>. Click <code>File</code> &rarr; <code>Save win32_handmade</code> to save your solution as <code>handmade.sln</code> in <code>misc</code> folder, then modify your <code>debug.bat</code> file to load the solution directly.

</p><p>

<div class="admonition ">If you don't see the <code>Save As...</code> dialog popping up, simply close the window. Visual Studio will ask you if you want to save your solution. Say yes, and save it.</div>

</p><pre class="listing tilde"><code><span class="line">@echo off</span>
<span class="line"></span><div class=" edit"><span class="line">start devenv misc\handmade.sln</span></div></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;13:</b> <file>[debug.bat]</file> </div></center>
<p>


<center><div class="image" style=""><a href="../media/day1/1.9-vs_debug.png" target="_blank"><img class="markdeep" src="../media/day1/1.9-vs_debug.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;9:</b> Setting your working directory in Visual Studio</span></center></div></center>

</p><p>

<div class="admonition warning">As of writing, Visual Studio 2019 Community Edition doesn't allow editing of the working directory. If this still is the case at the time of reading this, you can still follow these steps and then open <code>handmade.sln</code> in your text editor. Change <code>StartingDirectory</code> value to <code>W:\handmade\data</code> and save the file. 

</p><p>

    This is one of the reasons why you should try out RemedyBG. ;)</div>

</p>
<a class="target" name="debuggingyourprogram">&nbsp;</a><a class="target" name="debugginginremedybgorvisualstudio/debuggingyourprogram">&nbsp;</a><a class="target" name="toc4.3">&nbsp;</a><h2>Debugging Your Program</h2>
<p>


Since we specified our working directory to be <code>Data</code>, you should create this folder before we get going. Place it inside your <code>handmade</code> directory.

</p><p>

Once you completed your setup, while in the debugger, hit <code>F11</code> on your keyboard or <code>Control -&gt; Step Into (Line)</code> (RemedyBG) / <code>Debug -&gt; Step Into</code> (Visual Studio). You will see your source file appear on the screen, and a yellow arrow indicating the start of your <code>WinMain</code> function body. This arrow represents your current position in the program execution. If you hit <code>F11</code> a couple more times, it will go out of the program and into the disassembly (This is C runtime wrapping up your program exit). Hit <code>Shift-F5</code> to stop the debug process.

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.9-remedybg3.png" target="_blank"><img class="markdeep" src="../media/day1/1.9-remedybg3.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;10:</b> Debugging start!</span></center></div></center>

</p>
<a class="target" name="callstack">&nbsp;</a><a class="target" name="debugginginremedybgorvisualstudio/callstack">&nbsp;</a><a class="target" name="toc4.4">&nbsp;</a><h2>Call Stack</h2>
<p>


The debugger can display a number of useful windows that you should know about:

</p><p>

<ul>
<li class="asterisk">Call Stack
</li>
<li class="asterisk">Watch
</li>
<li class="asterisk">Output
</li>
<li class="asterisk">Breakpoints
</li>
<li class="asterisk">Threads
</li>
<li class="asterisk">Disassembly
</li>
<li class="asterisk">Memory</li></ul>

</p><p>

And many, many more that might or might not be that useful. These are available in the <code>Window</code> menu of RemedyBG or in <code>Debug</code> &rarr; <code>Window</code> <strong class="underscore">during a debug session</strong> on Visual Studio. We will touch on them at the various stages of this book. For now, let's look at the Call Stack.

</p><p>

Start a new debug session (hit <code>F11</code> again) and open the Call Stack. You will see an entire &ldquo;train&rdquo; of functions that called each other until we arrived to the current point (if you don't see the full stack in Visual Studio, right click your call stack and select <code>Show External Code</code>). 
<div class='table'>
<table class="table"><tr><th style="text-align:left"> Module name </th><th style="text-align:left"> Function Name </th><th style="text-align:left"> Address </th></tr>
<tr><td style="text-align:left"> <code>win32_handmade.exe</code> </td><td style="text-align:left"> <code>int WinMain(...)</code> </td><td style="text-align:left"> ... </td></tr>
<tr><td style="text-align:left"> <code>win32_handmade.exe</code> </td><td style="text-align:left"> <code>__scrt_common_main_seh()</code> </td><td style="text-align:left"> ... </td></tr>
<tr><td style="text-align:left"> <code>kernel32.dll</code> </td><td style="text-align:left">  </td><td style="text-align:left"> ... </td></tr>
<tr><td style="text-align:left"> <code>ntdll.dll</code> </td><td style="text-align:left">  </td><td style="text-align:left"> ... </td></tr>
</table><center><div class="tablecaption"><a class="target" name="table_x">&nbsp;</a><b style="font-style:normal;">Table&nbsp;1:</b> Call Stack</div></center></div>

</p><p>

The call stack is read from bottom up (most recent call at the top). <code>ntdll.dll</code> and <code>kernel32.dll</code> are the actual operating system. We are going to talk about what generally <code>dll</code>s are later, so let's skip those. But then the operating system calls into <code>win32_handmade.exe</code>, not into the <code>WinMain</code> we defined, but into <code>__scrt_common_main_seh()</code>. 

</p><p>

<div class="admonition tip">You can see the source of the CRT if you double-click the function on the call stack, in Visual Studio. RemedyBG doesn't provide the sources of the C Runtime Library.</div>

</p><p>

In conclusion, if we <em class="underscore">really</em> want to see where the code starts when Windows calls us, this is where the code starts. There's a list of things that happen first, that we did not write, to set up a bunch of things (which we really aren't going to use). 

</p>
<a class="target" name="addsomethingtodofortheprogram">&nbsp;</a><a class="target" name="addsomethingtodofortheprogram">&nbsp;</a><a class="target" name="toc5">&nbsp;</a><h1>Add Something to Do for the Program</h1>
<p>


Let's have some fun. We worked so hard for this lesson, so let's just make something functional: a message box! This will also serve us as a test that our program is running properly.

</p><p>

In order to pop up a message box, we call the Windows function <a href="https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-messagebox">MessageBox</a>. Let's open the link to see its syntax and copy paste in our program. Make sure to paste it inside the curly braces of your <code>WinMain</code> but before the <code>return</code>! 

</p><pre class="listing tilde"><code><div class=" add"><span class="line">    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MessageBox</span><span class="hljs-params">(</span>
<span class="line">      HWND    hWnd,</span>
<span class="line">      LPCTSTR lpText,</span>
<span class="line">      LPCTSTR lpCaption,</span>
<span class="line">      UINT    uType</span>
<span class="line">    )</span></span>;</span></div><span class="line">    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>);</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;14:</b> <file>[win32_handmade.cpp]</file> Adding a Message Box to our program.</div></center>
<p>


<code>int</code> at the beginning is its <em class="underscore">return type</em>. We don't care about this function's <em class="underscore">return value</em> right now so we should remove it.

</p><p>

<div class="admonition warning">If you don't remove <code>int</code> before MessageBox, you will get the error <code>C2440: 'initializing': cannot convert from 'initializer list' to 'int'</code>!</div>

</p><p>

Then, this function takes the following <em class="underscore">parameters</em>:

</p><p>

<ul>
<li class="asterisk"><code>HWND hWnd</code>: a handle to a window. We don't have one yet, so we just pass 0<sup><a href="#endnote-null">5</a></sup>.
</li>
<li class="asterisk"><code>LPCTSTR lpText</code>: a C string to display inside the message box. Don't forget the Double quotes for a C string! (")
</li>
<li class="asterisk"><code>LPCTSTR lpCaption</code>: a C string to serve as the message box title.
</li>
<li class="asterisk"><code>UINT uType</code>: one of the predefined values as outlined further down the page. This determines how the message box looks and what it does. We will use a mix of values by <em class="underscore">bitwise OR</em> combining information icon with the OK button. 
<ul>
    <li class="asterisk">While bitwise operators are a staple in programming, they are a bit of an advanced topic. For now, suffice to say that we want our message box to contain an Information Icon and an OK button, and we tell it by writing <code>MB_ICONINFORMATION | MB_OK</code>. Read more about the Bitwise Operators in Subsection  <a href="#toc8.2">8.2</a>.</li></ul></li></ul>

</p><p>

Combining all these things together and putting them on one line, we get our Message Box call:

</p><pre class="listing tilde"><code><div class=" edit"><span class="line">    MessageBox(<span class="hljs-number">0</span>, </span>
<span class="line">               <span class="hljs-string">"This is Handmade Hero."</span>, </span>
<span class="line">               <span class="hljs-string">"Handmade Hero"</span>, </span>
<span class="line">               MB_ICONINFORMATION | MB_OK</span>
<span class="line">               );</span></div><span class="line">    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>);</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;15:</b> <file>[win32_handmade.cpp]</file> Adding a Message Box to our program.</div></center>
<p>


We can even go further and compress it on one line: 

</p><pre class="listing tilde"><code><div class=" edit"><span class="line">    MessageBox(<span class="hljs-number">0</span>, <span class="hljs-string">"This is Handmade Hero."</span>, <span class="hljs-string">"Handmade Hero"</span>, MB_ICONINFORMATION | MB_OK);</span></div><span class="line">    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>);</span></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;16:</b> <file>[win32_handmade.cpp]</file> Adding a Message Box to our program.</div></center>

<a class="target" name="importalibrary">&nbsp;</a><a class="target" name="addsomethingtodofortheprogram/importalibrary">&nbsp;</a><a class="target" name="toc5.1">&nbsp;</a><h2>Import a Library</h2>
<p>


Now, if you try to compile now, the <em class="underscore">compilation</em> will go fine, but you will be immediately halted by the <em class="underscore">linker</em> which is called right after the complier:

</p><pre class="listing tilde"><code><span class="line">/out:win32_handmade.exe </span>
<span class="line">/debug </span>
<span class="line">win32_handmade.obj </span>
<span class="line">win32_handmade.obj : error LNK2019: unresolved external symbol __imp_MessageBoxA referenced in function WinMain</span>
<span class="line">win32_handmade.exe : fatal error LNK1120: 1 unresolved externals</span></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> Linker error</div></center>
<p>


Let's look at the bottom two lines.

</p><p>

The compilation result is recapped by the <code>fatal error LNK1120</code>: there was 1 &ldquo;unresolved external&rdquo;, which is further clarified in the <code>error LNK2019</code>: we're missing one symbol <code>__imp_messageBoxA</code>. What does this mean? 

</p><p>

During the compilation, the compiler (and the linker) only knows about the files that we specify in the <code>cl</code> line of our <code>build.bat</code>. In our previous compilation everything went smoothly:

</p><p>

<ul>
<li class="asterisk">Compiler built the <code>.cpp</code> file and produced the <code>.obj</code> file
</li>
<li class="asterisk">Linker linked the <code>.obj</code> file together and produced the <code>.exe</code> file</li></ul>

</p><p>

In this case, the linker went to look for the function <code>MessageBoxA</code> declared in <code>windows.h</code> but not defined, and didn't find it. 

</p><p>

However, there's something else that happens under the hood: we need to <em class="underscore">bind</em> with (running) Windows at runtime, we can't just have its functions defined in our code. So the linker needs to find the places where we call Windows and patch those references with the Windows' own code that's running at that time in memory. In order to that, we need to use what's called an <a href="https://docs.microsoft.com/en-us/cpp/build/reference/using-an-import-library-and-export-file">Import Library</a> (not to be confused with the normal libraries, also <code>.lib</code>). This library will do just that: it will put some markers in our code that, upon its loading, will be found by Windows and pointed to the actual functions running in memory.

</p><p>

<div class="admonition tip">For a more in-depth overview of how dynamic linking works, you can watch the short series <a href="https://hero.handmade.network/episode/intro-to-c">Intro to C</a> where this topic is covered in detail.</div>

</p><p>

We were able to link successfully beforehand, because there're a one <em class="underscore">implicit</em> library that is imported together with the CRT (<code>kernel32.lib</code>). However if we try, for example, to call into the UI system to draw our message box, we need to let the linker know about a new library (<code>user32.lib</code>) to import. 

</p><p>

To recap, when the linker combines all the <code>.obj</code> files and makes an executable, we should add an import library for the runtime functions that we use. Let's do just that: 

</p><pre class="listing tilde"><code><div class=" edit"><span class="line">cl -Zi ..\code\win32_handmade.cpp user32.lib</span></div></code></pre><center><div class="listingcaption tilde"><a class="target" name="listing_x">&nbsp;</a><b style="font-style:normal;">Listing&nbsp;17:</b> <file>[build.bat]</file> Linking with <code>user32.lib</code>. </div></center>
<p>




<div class="admonition tip">In <a href="https://docs.microsoft.com/en-us/">MSDN</a>, you can always look up the Import Library to be used at the bottom of the function article.</div>

</p><p>

<div class="admonition note"><div class="admonition-title"> <code>A</code> and <code>W</code> suffixes in Windows functions</div>

</p><p>

    Note that the function linker was looking for is <code>MessageBoxA</code>, while we called for <code>MessageBox</code>. This is because in Windows, any function that takes a string as input has an <b>A</b>NSI and a <b>W</b>ide (Unicode) version, and a macro decides which function to call. By default, the ANSI mode is enabled, but you can short-circuit this and call the version you prefer directly: 

</p><pre class="listing tilde"><code><div class=" edit"><span class="line">    MessageBoxA(<span class="hljs-number">0</span>, <span class="hljs-string">"This is Handmade Hero."</span>, <span class="hljs-string">"Handmade Hero"</span>, MB_ICONINFORMATION | MB_OK);</span></div></code></pre><center><div class="listingcaption tilde"><file>[win32_handmade.cpp]</file></div></center></div>

</p><p>


<a class="target" name="recap">&nbsp;</a><a class="target" name="recap">&nbsp;</a><a class="target" name="toc6">&nbsp;</a><h1>Recap</h1>
<p>


And there you have it! Today, we covered a lot of ground: set up our tools for writing, building and debugging our program, our dev environment, compiled our first program, and even dived a bit into the intricansies of the compiler and linker! Tomorrow, we will start laying down the groundwork to open our window and display something on the screen.

</p><p>

<center><div class="image" style=""><a href="../media/day1/1-messagebox.png" target="_blank"><img class="markdeep" src="../media/day1/1-messagebox.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;11:</b> Our message box</span></center></div></center>

</p><p>

<hr/>

</p><p>

<div class="endnote"><a class="target" name="endnote-entrypoint">&nbsp;</a><sup>1</sup> Technically, it's the entry point that the <em class="underscore">C runtime library</em> (that links with our program) will be entering... We'll see about that in Subsection  <a href="#toc8.1">8.1</a>.
</div>
</p><p>

<div class="endnote"><a class="target" name="endnote-ncmdshow">&nbsp;</a><sup>2</sup> If you right-click on any shortcut &rarr; Properties &rarr; Shortcut, you will see a <code>run</code> dropdown list with a few options like &ldquo;Normal Window&rdquo;, &ldquo;Minimized&rdquo;, &ldquo;Maximized&rdquo;. This is what's passed in nCmdShow. It's bizarre that Windows developers decided to pass it on together with the WinMain, and not through some function call. 
</div>
</p><p>

<div class="endnote"><a class="target" name="endnote-buildinginbat">&nbsp;</a><sup>3</sup> Or was, before <a href="https://handmadehero.org/">Handmade Hero</a> made its debut a few years back...
</div>
</p><p>

<div class="endnote"><a class="target" name="endnote-buildtools">&nbsp;</a><sup>4</sup> People <em class="underscore">love</em> their build tools. They have scripts that build their build files that their build tools modify for actual builds, with tools which are analysing their build tools... You get the idea. This however has a downside of having to mess around with your build tools a lot, just trying to get your stuff to build. 
</div>
</p><p>

<div class="endnote"><a class="target" name="endnote-null">&nbsp;</a><sup>5</sup> This course will use 0 instead of <code>NUL</code> or <code>nullptr</code>. Feel free to use your preferred null identifier.
</div>
</p>
<a class="target" name="exercises">&nbsp;</a><a class="target" name="exercises">&nbsp;</a><a class="target" name="toc7">&nbsp;</a><h1>Exercises</h1>
<p>


Before we move on, make sure you are comfortable with all this. If you made mistakes and learned from them, it's even better! It's practice, trial and error which will solidify all these notions in you, so that by the end of the day you'll just <em class="underscore">know</em> it. 

</p><p>

Below we're proposing a few exercises but feel free to think about something different! This is your world, and you're the creator.

</p>
<a class="target" name="adifferentmessagebox">&nbsp;</a><a class="target" name="exercises/adifferentmessagebox">&nbsp;</a><a class="target" name="toc7.1">&nbsp;</a><h2>A Different Message Box</h2>
<p>


Instead of using <code>MB_ICONINFORMATION | MB_OK</code> flags, try to put a different set of flags to your <code>MessageBoxA</code>. Change a message. See what happens if you have more than one button and you click one.

</p>
<a class="target" name="respawningmessageboxes">&nbsp;</a><a class="target" name="exercises/respawningmessageboxes">&nbsp;</a><a class="target" name="toc7.2">&nbsp;</a><h2>Respawning Message Boxes</h2>
<p>


Use the return of <code>MessageBoxA</code> to potentially spawn more message boxes. Spam yourself.

</p>
<a class="target" name="basicsofprogramming">&nbsp;</a><a class="target" name="basicsofprogramming">&nbsp;</a><a class="target" name="toc8">&nbsp;</a><h1>Basics of Programming</h1>
<p>


In this section, we will be detailing some of important programming concepts that we will encounter along the way. Some of these will be general programming, some C-specific, and others might be even more specific than that.

</p>
<a class="target" name="entrypointonwindows">&nbsp;</a><a class="target" name="basicsofprogramming/entrypointonwindows">&nbsp;</a><a class="target" name="toc8.1">&nbsp;</a><h2>Entry Point on Windows</h2>
<p>


<code>WinMain</code> is an <em class="underscore">entry point</em> for Windows. An entry point is a function that gets called, executes the code inside it, and returns to whoever called it. But who called us in the first place? In this particular way of compiling which we are doing right now, it's not actually Windows that called us, it's the so-called "<b>C</b> <b>R</b>untime <b>L</b>ibrary&rdquo;, or CRT for short. CRT is something that ships with all the C compilers, as mandated by the C specification (for Windows, you can find documentation on <a href="https://docs.microsoft.com/en-us/cpp/c-runtime-library/c-run-time-library-reference">MSDN</a>). In turn, the CRT was called by Windows. 

</p><p>

However, CRT is not part of Windows, it's inside our executable. And even if we aren't going to use any of its functions (since this course is about making things from scratch yourself), we can't just remove it like this. The compiler counts on CRT for a number of things. These things are actually hard-coded into the compiler to call into the CRT, and if it's not there, you'll need to implement that code yourself. 

</p><p>

We aren't going to address this here but, if you are interested to learn more, check out <a href="https://hero.handmade.network/forums/code-discussion/t/94-guide_-_how_to_avoid_c_c++_runtime_on_windows">this discussion</a> on Handmade Network.

</p>
<a class="target" name="bitwiseoperators">&nbsp;</a><a class="target" name="basicsofprogramming/bitwiseoperators">&nbsp;</a><a class="target" name="toc8.2">&nbsp;</a><h2>Bitwise Operators</h2>
<p>


<a href="https://en.wikipedia.org/wiki/Bitwise_operation">Bitwise operators</a> are operators that have a specific action on single bits inside the value. Of these <a href="https://en.wikipedia.org/wiki/Logical_disjunction">Bitwise OR operator</a> (single vertical bar, <code>|</code>) is a bitwise operator which checks if each bit of two values is set. The resulting number will have all corresponding bits set.

</p><p>

In this case, bitwise OR is used in <code>uType</code> as a way of setting <em class="underscore">flags</em> in a <em class="underscore">bit field</em>, where each bit means a specific thing. by &ldquo;ORing&rdquo; the different bits together, you can have multiple things happening at once (in our case, we want the OK button to appear, as well as the information icon).

</p><p>

As you can see from the definitions in the <a href="https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-messagebox">Parameters section</a>, MB_ICONINFORMATION is a label for &ldquo;hexadecimal 40" (i.e. binary 0100 0000), while MB_OK is a label for 0. We still want to specify it to avoid confusion, should we decide to replace it with, for example, OK and Cancel button set (MB_OKCANCEL, 1).

</p><p>

This is a valid solution to a problem where the output is configurable. Depending on the situation, a similar solution might be achieved by:

</p><p>

<ul>
<li class="asterisk">A list of booleans to pass as separate parameters
</li>
<li class="asterisk">A config struct 
</li>
<li class="asterisk">Multiple separate functions each doing its own thing
</li>
<li class="asterisk">Etc.</li></ul>

</p><p>

<em class="underscore">(back to Section  <a href="#toc5">5</a>)</em>

</p>
<a class="target" name="sideconsiderations">&nbsp;</a><a class="target" name="sideconsiderations">&nbsp;</a><a class="target" name="toc9">&nbsp;</a><h1>Side Considerations</h1>
<p>


In this section, we will be showcasing additional things you might want to do to make your life easier, and to follow more closely our own way of doing things. 

</p>
<a class="target" name="createavirtualdrive">&nbsp;</a><a class="target" name="sideconsiderations/createavirtualdrive">&nbsp;</a><a class="target" name="toc9.1">&nbsp;</a><h2>Create a Virtual Drive</h2>
<p>


One command to note is <code>subst</code>. On Windows, there're <em class="underscore">drives</em> (C, D, etc.) that, in the command line, you can quickly refer to by specifying their letter (e.g. <code>C:</code>). What <code>subst</code> does is taking an (available) drive letter and assigning it a path on your hard drive. This can come handy to point your codebase root folder, especially if you move the codebase to another machine or location. 

</p><p>

For more details, simply type <code>subst /?</code> in the command line.

</p><p>

<div class="admonition trivia"><div class="admonition-title"> Trivia: <code>subst</code> and Amiga computer veterans</div>

</p><p>

    <a href="https://caseymuratori.com/">Casey</a> notes that this habit of his is highly unusual, and that you can be completely free to skip it. It might be a legacy habit of him working a lot with the <a href="https://en.wikipedia.org/wiki/Amiga">Amiga computers</a> popular in the late 80's... or of the people who watched <a href="https://handmadehero.org/">Handmade Hero</a> a lot.</div>

</p><p>

Let's assign <code>w</code> drive to our codebase, create a <code>handmade</code> directory in it, and move into the directory.

</p><pre class="listing tilde"><code><div class=" input"><span class="line">D:\Documents\Codebase&gt; subst w: d:\documents\codebase</span>
<span class="line">D:\Documents\Codebase&gt; w:</span>
<span class="line">W:\&gt; cd handmade</span>
<span class="line">W:\handmade&gt; _</span></div></code></pre><center><div class="listingcaption tilde"><file>[Command Prompt]</file> Setting up your work folder</div></center>
<p>




<div class="admonition note">This command must be run each time you restart your PC. If you'd like subst to happen automatically, create a <code>startup.bat</code> file with the following commands: 

</p><p>

    <code>@echo off</code>

</p><p>

    <code>subst w: [your codebase location]</code>

</p><p>

    Save this file in <code>%appdata%\Microsoft\Windows\Start Menu\Programs\Startup</code> folder.</div>

</p><p>

So now, coming back to <code>Command Prompt Properties</code> &rarr; <code>Shortcut</code>, you can specify its <code>Start in</code> location as <code>w:\handmade</code>. Remember to restart!

</p><p>

<center><div class="image" style=""><a href="../media/day1/1.4-cmd2.png" target="_blank"><img class="markdeep" src="../media/day1/1.4-cmd2.png" /></a><center><span class="imagecaption"><a class="target" name="figure_x">&nbsp;</a><b style="font-style:normal;">Figure&nbsp;12:</b> Customized Command Prompt Window next to the Properties Window</span></center></div></center>

</p><p>

If you're coming from Subsection  <a href="#toc1.2">1.2</a>, you can continue by going to the <a href="#setupthetexteditor">Set Up the Text Editor</a> subsection.

</p>
<a class="target" name="navigation">&nbsp;</a><a class="target" name="navigation">&nbsp;</a><a class="target" name="toc10">&nbsp;</a><h1>Navigation</h1>
<p>


Up Next: <a href="day2.html">Day 2. Opening a Win32 Window</a>

</p><p>

<a href="../index.md.html">Back to Index</a>

</p>
<div class="nonumberh1">Glossary</div>
<p>





<ul>
<li class="asterisk"><a href="https://en.wikipedia.org/wiki/Bit_field">Bit Field</a> is a sequence of bits, usually stored as an <code>unsigned int</code> of a known length. It's used to read and write individual bits using <a href="https://en.wikipedia.org/wiki/Logical_disjunction">bitwise OR</a> and specific constants. 
</li>
<li class="asterisk"><a href="https://en.wikipedia.org/wiki/Bitwise_operation">Bitwise operators</a> operate on one or more bit patterns or binary numerals at the level of their individual bits. It is a fast and simple action, directly supported by the processor, and is used to manipulate values for comparisons and calculations. 
</li>
<li class="asterisk"><a href="https://en.wikipedia.org/wiki/Logical_disjunction">Bitwise OR</a> is a binary operation that takes two bit patterns of equal length and performs the logical inclusive OR operation on each pair of corresponding bits. The result in each position is 0 if both bits are 0, while otherwise the result is 1.
</li>
<li class="asterisk">Flag
</li>
<li class="asterisk">Function
</li>
<li class="asterisk">Parameter</li></ul>

</p>
<div class="nonumberh1">References</div>

<div class="nonumberh1">MSDN Links</div>
<p>


<a href="https://docs.microsoft.com/en-us/cpp/build/reference/using-an-import-library-and-export-file">Import Libraries</a>

</p><p>

<a href="https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-messagebox">MessageBox</a>

</p><p>

<a href="https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-winmain">WinMain</a>

</p>
<div class="nonumberh1">Compiler Options</div>
<p>


<a href="https://docs.microsoft.com/en-us/cpp/build/reference/debug-generate-debug-info">-DEBUG</a> Creates debugging information for the executable.

</p><p>

<a href="https://docs.microsoft.com/en-us/cpp/build/reference/z7-zi-zi-debug-information-format">-Zi</a> Generate a separate PDB file that contains all the symbolic debugging information for use with the debugger. Implicitly sets <a href="https://docs.microsoft.com/en-us/cpp/build/reference/debug-generate-debug-info">-DEBUG</a> flag.

</p>
<div class="nonumberh1">Other</div>
<p>


<a href="https://github.com/liberationfonts/liberation-fonts/releases">Liberation Mono</a>

</p><p>

<a href="https://hero.handmade.network/forums/code-discussion/t/1075-visual_studio_dll_compiler_nightmare_week_5#6104">Setting up project in Visual Studio</a>

</p><p>

<style class="fallback">
  body {
    visibility: hidden;
    font-family: sans-serif;
  }
</style>

</p><p>

<script>markdeepOptions = { tocStyle: 'long' }; window.alreadyProcessedMarkdeep || (document.body.style.visibility = 'visible');</script>
</dir></dir></windows.h></p></span><div id="mdContextMenu" style="visibility:hidden"></div><div class="markdeepFooter"><i>formatted by <a href="https://casual-effects.com/markdeep" style="color:#999">Markdeep&nbsp;1.10&nbsp;&nbsp;</a></i><div style="display:inline-block;font-size:13px;font-family:'Times New Roman',serif;vertical-align:middle;transform:translate(-3px,-1px)rotate(135deg);">&#x2712;</div></div>